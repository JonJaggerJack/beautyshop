import{s as e,d as t,u as n,a,c as l,p as s,r as o,w as i,h as r,n as c,b as u,i as d,e as p,f as v,g as m,j as f,k as h,l as g,v as y,t as b,o as k,m as C,q as w,x,y as S,z as E,A,F as P,B as I,C as R,D as O,E as N}from"./vue-DP8WIA8a.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const T="undefined"!=typeof document;function _(e){return"object"==typeof e||"displayName"in e||"props"in e||"__vccOpts"in e}const M=Object.assign;function L(e,t){const n={};for(const a in t){const l=t[a];n[a]=V(l)?l.map(e):e(l)}return n}const q=()=>{},V=Array.isArray;function D(e,t){const n={};for(const a in e)n[a]=a in t?t[a]:e[a];return n}const B=/#/g,U=/&/g,G=/\//g,j=/=/g,F=/\?/g,$=/\+/g,H=/%5B/g,z=/%5D/g,J=/%5E/g,W=/%60/g,K=/%7B/g,Q=/%7C/g,Z=/%7D/g,X=/%20/g;function Y(e){return null==e?"":encodeURI(""+e).replace(Q,"|").replace(H,"[").replace(z,"]")}function ee(e){return Y(e).replace($,"%2B").replace(X,"+").replace(B,"%23").replace(U,"%26").replace(W,"`").replace(K,"{").replace(Z,"}").replace(J,"^")}function te(e){return ee(e).replace(j,"%3D")}function ne(e){return function(e){return Y(e).replace(B,"%23").replace(F,"%3F")}(e).replace(G,"%2F")}function ae(e){if(null==e)return null;try{return decodeURIComponent(""+e)}catch(t){}return""+e}const le=/\/$/;function se(e,t,n="/"){let a,l={},s="",o="";const i=t.indexOf("#");let r=t.indexOf("?");return r=i>=0&&r>i?-1:r,r>=0&&(a=t.slice(0,r),s=t.slice(r,i>0?i:t.length),l=e(s.slice(1))),i>=0&&(a=a||t.slice(0,i),o=t.slice(i,t.length)),a=function(e,t){if(e.startsWith("/"))return e;if(!e)return t;const n=t.split("/"),a=e.split("/"),l=a[a.length-1];".."!==l&&"."!==l||a.push("");let s,o,i=n.length-1;for(s=0;s<a.length;s++)if(o=a[s],"."!==o){if(".."!==o)break;i>1&&i--}return n.slice(0,i).join("/")+"/"+a.slice(s).join("/")}(null!=a?a:t,n),{fullPath:a+s+o,path:a,query:l,hash:ae(o)}}function oe(e,t){return t&&e.toLowerCase().startsWith(t.toLowerCase())?e.slice(t.length)||"/":e}function ie(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function re(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(var n in e)if(!ce(e[n],t[n]))return!1;return!0}function ce(e,t){return V(e)?ue(e,t):V(t)?ue(t,e):e?.valueOf()===t?.valueOf()}function ue(e,t){return V(t)?e.length===t.length&&e.every((e,n)=>e===t[n]):1===e.length&&e[0]===t}const de={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};let pe=function(e){return e.pop="pop",e.push="push",e}({}),ve=function(e){return e.back="back",e.forward="forward",e.unknown="",e}({});function me(e){if(!e)if(T){const t=document.querySelector("base");e=(e=t&&t.getAttribute("href")||"/").replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return"/"!==e[0]&&"#"!==e[0]&&(e="/"+e),e.replace(le,"")}const fe=/^[^#]+#/;function he(e,t){return e.replace(fe,"#")+t}const ge=()=>({left:window.scrollX,top:window.scrollY});function ye(e){let t;if("el"in e){const n=e.el,a="string"==typeof n&&n.startsWith("#"),l="string"==typeof n?a?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!l)return;t=function(e,t){const n=document.documentElement.getBoundingClientRect(),a=e.getBoundingClientRect();return{behavior:t.behavior,left:a.left-n.left-(t.left||0),top:a.top-n.top-(t.top||0)}}(l,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(null!=t.left?t.left:window.scrollX,null!=t.top?t.top:window.scrollY)}function be(e,t){return(history.state?history.state.position-t:-1)+e}const ke=new Map;function Ce(e){return"string"==typeof e||"symbol"==typeof e}let we=function(e){return e[e.MATCHER_NOT_FOUND=1]="MATCHER_NOT_FOUND",e[e.NAVIGATION_GUARD_REDIRECT=2]="NAVIGATION_GUARD_REDIRECT",e[e.NAVIGATION_ABORTED=4]="NAVIGATION_ABORTED",e[e.NAVIGATION_CANCELLED=8]="NAVIGATION_CANCELLED",e[e.NAVIGATION_DUPLICATED=16]="NAVIGATION_DUPLICATED",e}({});const xe=Symbol("");function Se(e,t){return M(new Error,{type:e,[xe]:!0},t)}function Ee(e,t){return e instanceof Error&&xe in e&&(null==t||!!(e.type&t))}we.MATCHER_NOT_FOUND,we.NAVIGATION_GUARD_REDIRECT,we.NAVIGATION_ABORTED,we.NAVIGATION_CANCELLED,we.NAVIGATION_DUPLICATED;function Ae(e){const t={};if(""===e||"?"===e)return t;const n=("?"===e[0]?e.slice(1):e).split("&");for(let a=0;a<n.length;++a){const e=n[a].replace($," "),l=e.indexOf("="),s=ae(l<0?e:e.slice(0,l)),o=l<0?null:ae(e.slice(l+1));if(s in t){let e=t[s];V(e)||(e=t[s]=[e]),e.push(o)}else t[s]=o}return t}function Pe(e){let t="";for(let n in e){const a=e[n];n=te(n),null!=a?(V(a)?a.map(e=>e&&ee(e)):[a&&ee(a)]).forEach(e=>{void 0!==e&&(t+=(t.length?"&":"")+n,null!=e&&(t+="="+e))}):void 0!==a&&(t+=(t.length?"&":"")+n)}return t}function Ie(e){const t={};for(const n in e){const a=e[n];void 0!==a&&(t[n]=V(a)?a.map(e=>null==e?null:""+e):null==a?a:""+a)}return t}const Re=Symbol(""),Oe=Symbol(""),Ne=Symbol(""),Te=Symbol(""),_e=Symbol("");function Me(){let e=[];return{add:function(t){return e.push(t),()=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)}},list:()=>e.slice(),reset:function(){e=[]}}}function Le(e,t,n,a,l,s=e=>e()){const o=a&&(a.enterCallbacks[l]=a.enterCallbacks[l]||[]);return()=>new Promise((i,r)=>{const c=e=>{var s;!1===e?r(Se(we.NAVIGATION_ABORTED,{from:n,to:t})):e instanceof Error?r(e):"string"==typeof(s=e)||s&&"object"==typeof s?r(Se(we.NAVIGATION_GUARD_REDIRECT,{from:t,to:e})):(o&&a.enterCallbacks[l]===o&&"function"==typeof e&&o.push(e),i())},u=s(()=>e.call(a&&a.instances[l],t,n,c));let d=Promise.resolve(u);e.length<3&&(d=d.then(c)),d.catch(e=>r(e))})}function qe(e,t,n,a,l=e=>e()){const s=[];for(const o of e)for(const e in o.components){let i=o.components[e];if("beforeRouteEnter"===t||o.instances[e])if(_(i)){const r=(i.__vccOpts||i)[t];r&&s.push(Le(r,n,a,o,e,l))}else{let r=i();s.push(()=>r.then(s=>{if(!s)throw new Error(`Couldn't resolve component "${e}" at "${o.path}"`);const i=(r=s).__esModule||"Module"===r[Symbol.toStringTag]||r.default&&_(r.default)?s.default:s;var r;o.mods[e]=s,o.components[e]=i;const c=(i.__vccOpts||i)[t];return c&&Le(c,n,a,o,e,l)()}))}}return s}function Ve(e,t){const{pathname:n,search:a,hash:l}=t,s=e.indexOf("#");if(s>-1){let t=l.includes(e.slice(s))?e.slice(s).length:1,n=l.slice(t);return"/"!==n[0]&&(n="/"+n),oe(n,"")}return oe(n,e)+a+l}function De(e,t,n,a=!1,l=!1){return{back:e,current:t,forward:n,replaced:a,position:window.history.length,scroll:l?ge():null}}function Be(e){const{history:t,location:n}=window,a={value:Ve(e,n)},l={value:t.state};function s(a,s,o){const i=e.indexOf("#"),r=i>-1?(n.host&&document.querySelector("base")?e:e.slice(i))+a:location.protocol+"//"+location.host+e+a;try{t[o?"replaceState":"pushState"](s,"",r),l.value=s}catch(c){console.error(c),n[o?"replace":"assign"](r)}}return l.value||s(a.value,{back:null,current:a.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0),{location:a,state:l,push:function(e,n){const o=M({},l.value,t.state,{forward:e,scroll:ge()});s(o.current,o,!0),s(e,M({},De(a.value,e,null),{position:o.position+1},n),!1),a.value=e},replace:function(e,n){s(e,M({},t.state,De(l.value.back,e,l.value.forward,!0),n,{position:l.value.position}),!0),a.value=e}}}let Ue=function(e){return e[e.Static=0]="Static",e[e.Param=1]="Param",e[e.Group=2]="Group",e}({});var Ge=function(e){return e[e.Static=0]="Static",e[e.Param=1]="Param",e[e.ParamRegExp=2]="ParamRegExp",e[e.ParamRegExpEnd=3]="ParamRegExpEnd",e[e.EscapeNext=4]="EscapeNext",e}(Ge||{});const je={type:Ue.Static,value:""},Fe=/[a-zA-Z0-9_]/;const $e="[^/]+?",He={sensitive:!1,strict:!1,start:!0,end:!0};var ze=function(e){return e[e._multiplier=10]="_multiplier",e[e.Root=90]="Root",e[e.Segment=40]="Segment",e[e.SubSegment=30]="SubSegment",e[e.Static=40]="Static",e[e.Dynamic=20]="Dynamic",e[e.BonusCustomRegExp=10]="BonusCustomRegExp",e[e.BonusWildcard=-50]="BonusWildcard",e[e.BonusRepeatable=-20]="BonusRepeatable",e[e.BonusOptional=-8]="BonusOptional",e[e.BonusStrict=.7000000000000001]="BonusStrict",e[e.BonusCaseSensitive=.25]="BonusCaseSensitive",e}(ze||{});const Je=/[.+*?^${}()[\]/\\]/g;function We(e,t){let n=0;for(;n<e.length&&n<t.length;){const a=t[n]-e[n];if(a)return a;n++}return e.length<t.length?1===e.length&&e[0]===ze.Static+ze.Segment?-1:1:e.length>t.length?1===t.length&&t[0]===ze.Static+ze.Segment?1:-1:0}function Ke(e,t){let n=0;const a=e.score,l=t.score;for(;n<a.length&&n<l.length;){const e=We(a[n],l[n]);if(e)return e;n++}if(1===Math.abs(l.length-a.length)){if(Qe(a))return 1;if(Qe(l))return-1}return l.length-a.length}function Qe(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const Ze={strict:!1,end:!0,sensitive:!1};function Xe(e,t,n){const a=function(e,t){const n=M({},He,t),a=[];let l=n.start?"^":"";const s=[];for(const i of e){const e=i.length?[]:[ze.Root];n.strict&&!i.length&&(l+="/");for(let t=0;t<i.length;t++){const a=i[t];let o=ze.Segment+(n.sensitive?ze.BonusCaseSensitive:0);if(a.type===Ue.Static)t||(l+="/"),l+=a.value.replace(Je,"\\$&"),o+=ze.Static;else if(a.type===Ue.Param){const{value:e,repeatable:n,optional:r,regexp:c}=a;s.push({name:e,repeatable:n,optional:r});const u=c||$e;u!==$e&&(o+=ze.BonusCustomRegExp);let d=n?`((?:${u})(?:/(?:${u}))*)`:`(${u})`;t||(d=r&&i.length<2?`(?:/${d})`:"/"+d),r&&(d+="?"),l+=d,o+=ze.Dynamic,r&&(o+=ze.BonusOptional),n&&(o+=ze.BonusRepeatable),".*"===u&&(o+=ze.BonusWildcard)}e.push(o)}a.push(e)}if(n.strict&&n.end){const e=a.length-1;a[e][a[e].length-1]+=ze.BonusStrict}n.strict||(l+="/?"),n.end?l+="$":n.strict&&!l.endsWith("/")&&(l+="(?:/|$)");const o=new RegExp(l,n.sensitive?"":"i");return{re:o,score:a,keys:s,parse:function(e){const t=e.match(o),n={};if(!t)return null;for(let a=1;a<t.length;a++){const e=t[a]||"",l=s[a-1];n[l.name]=e&&l.repeatable?e.split("/"):e}return n},stringify:function(t){let n="",a=!1;for(const l of e){a&&n.endsWith("/")||(n+="/"),a=!1;for(const e of l)if(e.type===Ue.Static)n+=e.value;else if(e.type===Ue.Param){const{value:s,repeatable:o,optional:i}=e,r=s in t?t[s]:"";if(V(r)&&!o)throw new Error(`Provided param "${s}" is an array but it is not repeatable (* or + modifiers)`);const c=V(r)?r.join("/"):r;if(!c){if(!i)throw new Error(`Missing required param "${s}"`);l.length<2&&(n.endsWith("/")?n=n.slice(0,-1):a=!0)}n+=c}}return n||"/"}}}(function(e){if(!e)return[[]];if("/"===e)return[[je]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(e){throw new Error(`ERR (${n})/"${c}": ${e}`)}let n=Ge.Static,a=n;const l=[];let s;function o(){s&&l.push(s),s=[]}let i,r=0,c="",u="";function d(){c&&(n===Ge.Static?s.push({type:Ue.Static,value:c}):n===Ge.Param||n===Ge.ParamRegExp||n===Ge.ParamRegExpEnd?(s.length>1&&("*"===i||"+"===i)&&t(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),s.push({type:Ue.Param,value:c,regexp:u,repeatable:"*"===i||"+"===i,optional:"*"===i||"?"===i})):t("Invalid state to consume buffer"),c="")}function p(){c+=i}for(;r<e.length;)if(i=e[r++],"\\"!==i||n===Ge.ParamRegExp)switch(n){case Ge.Static:"/"===i?(c&&d(),o()):":"===i?(d(),n=Ge.Param):p();break;case Ge.EscapeNext:p(),n=a;break;case Ge.Param:"("===i?n=Ge.ParamRegExp:Fe.test(i)?p():(d(),n=Ge.Static,"*"!==i&&"?"!==i&&"+"!==i&&r--);break;case Ge.ParamRegExp:")"===i?"\\"==u[u.length-1]?u=u.slice(0,-1)+i:n=Ge.ParamRegExpEnd:u+=i;break;case Ge.ParamRegExpEnd:d(),n=Ge.Static,"*"!==i&&"?"!==i&&"+"!==i&&r--,u="";break;default:t("Unknown state")}else a=n,n=Ge.EscapeNext;return n===Ge.ParamRegExp&&t(`Unfinished custom RegExp for param "${c}"`),d(),o(),l}(e.path),n),l=M(a,{record:e,parent:t,children:[],alias:[]});return t&&!l.record.aliasOf==!t.record.aliasOf&&t.children.push(l),l}function Ye(e,t){const n=[],a=new Map;function l(e,n,a){const i=!a,r=tt(e);r.aliasOf=a&&a.record;const c=D(t,e),u=[r];if("alias"in e){const t="string"==typeof e.alias?[e.alias]:e.alias;for(const e of t)u.push(tt(M({},r,{components:a?a.record.components:r.components,path:e,aliasOf:a?a.record:r})))}let d,p;for(const t of u){const{path:u}=t;if(n&&"/"!==u[0]){const e=n.record.path,a="/"===e[e.length-1]?"":"/";t.path=n.record.path+(u&&a+u)}if(d=Xe(t,n,c),a?a.alias.push(d):(p=p||d,p!==d&&p.alias.push(d),i&&e.name&&!at(d)&&s(e.name)),st(d)&&o(d),r.children){const e=r.children;for(let t=0;t<e.length;t++)l(e[t],d,a&&a.children[t])}a=a||d}return p?()=>{s(p)}:q}function s(e){if(Ce(e)){const t=a.get(e);t&&(a.delete(e),n.splice(n.indexOf(t),1),t.children.forEach(s),t.alias.forEach(s))}else{const t=n.indexOf(e);t>-1&&(n.splice(t,1),e.record.name&&a.delete(e.record.name),e.children.forEach(s),e.alias.forEach(s))}}function o(e){const t=function(e,t){let n=0,a=t.length;for(;n!==a;){const l=n+a>>1;Ke(e,t[l])<0?a=l:n=l+1}const l=function(e){let t=e;for(;t=t.parent;)if(st(t)&&0===Ke(e,t))return t}(e);l&&(a=t.lastIndexOf(l,a-1));return a}(e,n);n.splice(t,0,e),e.record.name&&!at(e)&&a.set(e.record.name,e)}return t=D(Ze,t),e.forEach(e=>l(e)),{addRoute:l,resolve:function(e,t){let l,s,o,i={};if("name"in e&&e.name){if(l=a.get(e.name),!l)throw Se(we.MATCHER_NOT_FOUND,{location:e});o=l.record.name,i=M(et(t.params,l.keys.filter(e=>!e.optional).concat(l.parent?l.parent.keys.filter(e=>e.optional):[]).map(e=>e.name)),e.params&&et(e.params,l.keys.map(e=>e.name))),s=l.stringify(i)}else if(null!=e.path)s=e.path,l=n.find(e=>e.re.test(s)),l&&(i=l.parse(s),o=l.record.name);else{if(l=t.name?a.get(t.name):n.find(e=>e.re.test(t.path)),!l)throw Se(we.MATCHER_NOT_FOUND,{location:e,currentLocation:t});o=l.record.name,i=M({},t.params,e.params),s=l.stringify(i)}const r=[];let c=l;for(;c;)r.unshift(c.record),c=c.parent;return{name:o,path:s,params:i,matched:r,meta:lt(r)}},removeRoute:s,clearRoutes:function(){n.length=0,a.clear()},getRoutes:function(){return n},getRecordMatcher:function(e){return a.get(e)}}}function et(e,t){const n={};for(const a of t)a in e&&(n[a]=e[a]);return n}function tt(e){const t={path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:e.aliasOf,beforeEnter:e.beforeEnter,props:nt(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}};return Object.defineProperty(t,"mods",{value:{}}),t}function nt(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const a in e.components)t[a]="object"==typeof n?n[a]:n;return t}function at(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function lt(e){return e.reduce((e,t)=>M(e,t.meta),{})}function st({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function ot(e){const t=d(Ne),a=d(Te),s=l(()=>{const a=n(e.to);return t.resolve(a)}),o=l(()=>{const{matched:e}=s.value,{length:t}=e,n=e[t-1],l=a.matched;if(!n||!l.length)return-1;const o=l.findIndex(ie.bind(null,n));if(o>-1)return o;const i=rt(e[t-2]);return t>1&&rt(n)===i&&l[l.length-1].path!==i?l.findIndex(ie.bind(null,e[t-2])):o}),i=l(()=>o.value>-1&&function(e,t){for(const n in t){const a=t[n],l=e[n];if("string"==typeof a){if(a!==l)return!1}else if(!V(l)||l.length!==a.length||a.some((e,t)=>e.valueOf()!==l[t].valueOf()))return!1}return!0}(a.params,s.value.params)),r=l(()=>o.value>-1&&o.value===a.matched.length-1&&re(a.params,s.value.params));return{route:s,href:l(()=>s.value.href),isActive:i,isExactActive:r,navigate:function(a={}){if(function(e){if(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)return;if(e.defaultPrevented)return;if(void 0!==e.button&&0!==e.button)return;if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}e.preventDefault&&e.preventDefault();return!0}(a)){const a=t[n(e.replace)?"replace":"push"](n(e.to)).catch(q);return e.viewTransition&&"undefined"!=typeof document&&"startViewTransition"in document&&document.startViewTransition(()=>a),a}return Promise.resolve()}}}const it=t({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:ot,setup(e,{slots:t}){const n=u(ot(e)),{options:a}=d(Ne),s=l(()=>({[ct(e.activeClass,a.linkActiveClass,"router-link-active")]:n.isActive,[ct(e.exactActiveClass,a.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const a=t.default&&(1===(l=t.default(n)).length?l[0]:l);var l;return e.custom?a:r("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:s.value},a)}}});function rt(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const ct=(e,t,n)=>null!=e?e:null!=t?t:n;function ut(e,t){if(!e)return null;const n=e(t);return 1===n.length?n[0]:n}const dt=t({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:a}){const c=d(_e),u=l(()=>e.route||c.value),p=d(Oe,0),v=l(()=>{let e=n(p);const{matched:t}=u.value;let a;for(;(a=t[e])&&!a.components;)e++;return e}),m=l(()=>u.value.matched[v.value]);s(Oe,l(()=>v.value+1)),s(Re,m),s(_e,u);const f=o();return i(()=>[f.value,m.value,e.name],([e,t,n],[a,l,s])=>{t&&(t.instances[n]=e,l&&l!==t&&e&&e===a&&(t.leaveGuards.size||(t.leaveGuards=l.leaveGuards),t.updateGuards.size||(t.updateGuards=l.updateGuards))),!e||!t||l&&ie(t,l)&&a||(t.enterCallbacks[n]||[]).forEach(t=>t(e))},{flush:"post"}),()=>{const n=u.value,l=e.name,s=m.value,o=s&&s.components[l];if(!o)return ut(a.default,{Component:o,route:n});const i=s.props[l],c=i?!0===i?n.params:"function"==typeof i?i(n):i:null,d=r(o,M({},c,t,{onVnodeUnmounted:e=>{e.component.isUnmounted&&(s.instances[l]=null)},ref:f}));return ut(a.default,{Component:d,route:n})||d}}});function pt(){return d(Ne)}const vt={},mt={class:"login-container"},ft={class:"login-card"},ht={class:"form-group"},gt={key:0,class:"error-message"},yt={class:"form-group"},bt={key:0,class:"error-message"},kt={key:0,class:"alert alert-danger"},Ct={key:1,class:"alert alert-success"},wt=["disabled"],xt={key:0},St={key:1},Et={__name:"LoginPage",setup(e){const t=pt(),n=u({email:"",password:""}),a=u({email:"",password:"",general:""}),l=o(!1),s=o(""),i=()=>{n.email?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n.email)?a.email="":a.email="Veuillez entrer un email valide":a.email="L'email est requis"},r=async()=>{if(a.email="",a.password="",a.general="",s.value="",n.email)if(n.password){if(i(),!a.email){l.value=!0;try{const{useAuth:e}=await function(e,t){let n=Promise.resolve();if(t&&t.length>0){let e=function(e){return Promise.all(e.map(e=>Promise.resolve(e).then(e=>({status:"fulfilled",value:e}),e=>({status:"rejected",reason:e}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),l=a?.nonce||a?.getAttribute("nonce");n=e(t.map(e=>{if((e=function(e){return"/"+e}(e))in vt)return;vt[e]=!0;const t=e.endsWith(".css"),n=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${n}`))return;const a=document.createElement("link");return a.rel=t?"stylesheet":"modulepreload",t||(a.as="script"),a.crossOrigin="",a.href=e,l&&a.setAttribute("nonce",l),document.head.appendChild(a),t?new Promise((t,n)=>{a.addEventListener("load",t),a.addEventListener("error",()=>n(new Error(`Unable to preload CSS for ${e}`)))}):void 0}))}function a(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return n.then(t=>{for(const e of t||[])"rejected"===e.status&&a(e.reason);return e().catch(a)})}(async()=>{const{useAuth:e}=await Promise.resolve().then(()=>Tt);return{useAuth:e}},void 0),{login:l}=e(),o=l(n.email,n.password);o.success?(n.email="",n.password="",s.value="",await t.push("/dashboard")):a.general=o.error||"Email ou mot de passe incorrect"}catch(e){a.general="Erreur de connexion. Veuillez r√©essayer."}finally{l.value=!1}}}else a.password="Le mot de passe est requis";else a.email="L'email est requis"};return(e,t)=>(k(),p("div",mt,[v("div",ft,[t[4]||(t[4]=m('<div class="login-header"><svg class="salon-logo" viewBox="0 0 120 120" xmlns="http://www.w3.org/2000/svg"><g transform="translate(20, 35)"><circle cx="8" cy="20" r="8" fill="none" stroke="currentColor" stroke-width="2.5"></circle><circle cx="32" cy="20" r="8" fill="none" stroke="currentColor" stroke-width="2.5"></circle><path d="M 16 15 Q 20 5 20 -5" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"></path><path d="M 24 15 Q 20 5 20 -5" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"></path><path d="M 16 25 Q 20 35 20 45" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"></path><path d="M 24 25 Q 20 35 20 45" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"></path></g><g transform="translate(70, 30)"><rect x="0" y="0" width="12" height="28" rx="3" fill="none" stroke="currentColor" stroke-width="2.5"></rect><line x1="3" y1="28" x2="3" y2="50" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"></line><line x1="9" y1="28" x2="9" y2="50" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"></line><line x1="15" y1="28" x2="15" y2="50" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"></line></g></svg><h1>BeautyShop</h1><p class="subtitle">Syst√®me de Gestion</p></div>',1)),v("form",{onSubmit:f(r,["prevent"]),class:"login-form"},[v("div",ht,[t[2]||(t[2]=v("label",{for:"email"},"Email",-1)),g(v("input",{id:"email","onUpdate:modelValue":t[0]||(t[0]=e=>n.email=e),type:"email",placeholder:"Entrez votre email",required:"",onBlur:i},null,544),[[y,n.email]]),a.email?(k(),p("span",gt,b(a.email),1)):h("",!0)]),v("div",yt,[t[3]||(t[3]=v("label",{for:"password"},"Mot de passe",-1)),g(v("input",{id:"password","onUpdate:modelValue":t[1]||(t[1]=e=>n.password=e),type:"password",placeholder:"Entrez votre mot de passe",required:""},null,512),[[y,n.password]]),a.password?(k(),p("span",bt,b(a.password),1)):h("",!0)]),a.general?(k(),p("div",kt,b(a.general),1)):h("",!0),s.value?(k(),p("div",Ct,b(s.value),1)):h("",!0),v("button",{type:"submit",class:"btn-login",disabled:l.value},[l.value?(k(),p("span",St,"Connexion en cours...")):(k(),p("span",xt,"Se Connecter"))],8,wt)],32),t[5]||(t[5]=m('<div class="login-footer"><p class="support-text"> Besoin de support ? <a href="tel:+243997775599">appelez le +243997775599</a></p><p class="info-text"> Pour plus d&#39;infos: <a href="https://effyiskey.com" target="_blank">effyiskey.com</a></p></div>',1))]),t[6]||(t[6]=v("div",{class:"login-background"},null,-1))]))}},At={GERANTE:"gerante",UTILISATEUR:"utilisateur",CAISSIER:"caissier"},Pt={[At.GERANTE]:{canViewDashboard:!0,canManageServices:!0,canManagePersonnel:!0,canManageStock:!0,canSell:!0,canViewReports:!0,cancel_invoice:!0},[At.UTILISATEUR]:{canViewDashboard:!0,canManageServices:!1,canManagePersonnel:!1,canManageStock:!1,canSell:!1,canViewReports:!0,cancel_invoice:!1},[At.CAISSIER]:{canViewDashboard:!0,canManageServices:!1,canManagePersonnel:!1,canManageStock:!1,canSell:!0,canViewReports:!1,cancel_invoice:!1}},It=[{id:1,email:"gerante@salon.fr",password:"gerante123",role:At.GERANTE,name:"Marie Dupont",photo:null},{id:2,email:"utilisateur@salon.fr",password:"user123",role:At.UTILISATEUR,name:"Jean Martin",photo:null},{id:3,email:"caissier@salon.fr",password:"caissier123",role:At.CAISSIER,name:"Sophie Bernard",photo:null}],Rt=o(null),Ot=()=>{const e=localStorage.getItem("userToken");if(e)try{Rt.value=JSON.parse(e)}catch(t){localStorage.removeItem("userToken")}};function Nt(){return{currentUser:l(()=>Rt.value),login:(e,t)=>{const n=It.find(n=>n.email===e&&n.password===t);if(n){const e={id:n.id,email:n.email,role:n.role,name:n.name,photo:n.photo};return Rt.value=e,localStorage.setItem("userToken",JSON.stringify(e)),{success:!0,user:e}}return{success:!1,error:"Email ou mot de passe incorrect"}},logout:()=>{Rt.value=null,localStorage.removeItem("userToken")},initAuth:()=>{Ot()},hasPermission:e=>{if(!Rt.value)return!1;const t=Pt[Rt.value.role];return t?.[e]||!1},isRole:e=>Rt.value?.role===e,canAccess:e=>{if(!Rt.value)return!1;const t=Rt.value.role;switch(e){case"Dashboard":return!0;case"Services":case"Personnel":case"Stock":return t===At.GERANTE;case"POS":return t===At.CAISSIER||t===At.GERANTE;default:return!1}},ROLES:At}}Ot();const Tt=Object.freeze(Object.defineProperty({__proto__:null,ROLES:At,useAuth:Nt},Symbol.toStringTag,{value:"Module"})),_t=(e,t)=>{const n=e.__vccOpts||e;for(const[a,l]of t)n[a]=l;return n},Mt={class:"layout-container"},Lt={class:"sidebar"},qt={class:"user-profile"},Vt={class:"profile-avatar"},Dt=["src","alt"],Bt={key:1},Ut={class:"profile-info"},Gt={class:"profile-name"},jt={class:"profile-role"},Ft={class:"profile-email"},$t={class:"sidebar-nav"},Ht={class:"theme-buttons"},zt={class:"main-content"},Jt=_t({__name:"AppLayout",setup(e){const{currentUser:t,logout:a}=Nt(),s=pt(),i=o(!1),r=l(()=>t.value?.name?.charAt(0).toUpperCase()||"U"),c=l(()=>({[At.GERANTE]:"G√©rante",[At.UTILISATEUR]:"Utilisateur",[At.CAISSIER]:"Caissier"}[t.value?.role]||"Utilisateur")),u=()=>{i.value=!1,localStorage.setItem("darkMode","false"),document.documentElement.classList.remove("dark-mode")},d=()=>{i.value=!0,localStorage.setItem("darkMode","true"),document.documentElement.classList.add("dark-mode")},f=async()=>{a(),await s.push("/")},h=o(null),g=e=>{const n=e.target.files?.[0];if(n){const e=new FileReader;e.onload=e=>{t.value.photo=e.target.result,localStorage.setItem("users",JSON.stringify(JSON.parse(localStorage.getItem("users")||"[]").map(e=>e.id===t.value.id?t.value:e)))},e.readAsDataURL(n)}};return C(()=>{const e=localStorage.getItem("darkMode");null!==e&&(i.value="true"===e,i.value&&document.documentElement.classList.add("dark-mode"))}),(e,a)=>{const l=w("router-link"),s=w("router-view");return k(),p("div",Mt,[v("aside",Lt,[a[10]||(a[10]=v("div",{class:"sidebar-header"},[v("span",{class:"sidebar-logo"},"üíá‚Äç‚ôÄÔ∏è"),v("span",{class:"sidebar-title"},"CHEZ JK")],-1)),v("div",qt,[v("div",Vt,[n(t).photo?(k(),p("img",{key:0,src:n(t).photo,alt:n(t).name,class:"profile-photo"},null,8,Dt)):(k(),p("span",Bt,b(r.value),1))]),v("div",Ut,[v("p",Gt,b(n(t).name),1),v("p",jt,b(c.value),1),v("p",Ft,b(n(t).email),1)]),v("input",{ref_key:"photoInput",ref:h,type:"file",accept:"image/*",class:"photo-upload",onChange:g,style:{display:"none"}},null,544),v("button",{class:"photo-btn",onClick:a[0]||(a[0]=t=>e.$refs.photoInput.click()),title:"Changer photo"},[...a[1]||(a[1]=[v("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[v("circle",{cx:"12",cy:"12",r:"1"}),v("path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7"})],-1)])])]),v("nav",$t,[v("div",Ht,[v("button",{type:"button",onClick:u,class:S(["theme-btn light-btn",{active:!i.value}]),title:"Mode clair"},[...a[2]||(a[2]=[m('<svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-77f1dbe5><circle cx="12" cy="12" r="5" data-v-77f1dbe5></circle><line x1="12" y1="1" x2="12" y2="3" data-v-77f1dbe5></line><line x1="12" y1="21" x2="12" y2="23" data-v-77f1dbe5></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64" data-v-77f1dbe5></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78" data-v-77f1dbe5></line><line x1="1" y1="12" x2="3" y2="12" data-v-77f1dbe5></line><line x1="21" y1="12" x2="23" y2="12" data-v-77f1dbe5></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36" data-v-77f1dbe5></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22" data-v-77f1dbe5></line></svg>',1)])],2),v("button",{type:"button",onClick:d,class:S(["theme-btn dark-btn",{active:i.value}]),title:"Mode sombre"},[...a[3]||(a[3]=[v("svg",{class:"icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[v("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})],-1)])],2)]),x(l,{to:"/dashboard",class:"nav-link","active-class":"active"},{default:E(()=>[...a[4]||(a[4]=[v("svg",{class:"nav-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[v("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),v("polyline",{points:"9 22 9 12 15 12 15 22"})],-1),v("span",{class:"nav-label"},"Dashboard",-1)])]),_:1}),x(l,{to:"/services",class:"nav-link","active-class":"active"},{default:E(()=>[...a[5]||(a[5]=[v("svg",{class:"nav-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[v("circle",{cx:"12",cy:"12",r:"1"}),v("path",{d:"M12 1v6m0 6v6"}),v("path",{d:"M4.22 4.22l4.24 4.24m2.12 2.12l4.24 4.24"}),v("path",{d:"M1 12h6m6 0h6"}),v("path",{d:"M4.22 19.78l4.24-4.24m2.12-2.12l4.24-4.24"})],-1),v("span",{class:"nav-label"},"Services",-1)])]),_:1}),x(l,{to:"/personnel",class:"nav-link","active-class":"active"},{default:E(()=>[...a[6]||(a[6]=[v("svg",{class:"nav-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[v("path",{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),v("circle",{cx:"9",cy:"7",r:"4"}),v("path",{d:"M23 21v-2a4 4 0 0 0-3-3.87"}),v("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})],-1),v("span",{class:"nav-label"},"Personnel",-1)])]),_:1}),x(l,{to:"/stock",class:"nav-link","active-class":"active"},{default:E(()=>[...a[7]||(a[7]=[v("svg",{class:"nav-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[v("line",{x1:"16",y1:"3",x2:"16",y2:"21"}),v("line",{x1:"8",y1:"3",x2:"8",y2:"21"}),v("line",{x1:"3",y1:"8",x2:"21",y2:"8"}),v("line",{x1:"3",y1:"16",x2:"21",y2:"16"}),v("path",{d:"M3 3h18v18H3z"})],-1),v("span",{class:"nav-label"},"Stock",-1)])]),_:1}),x(l,{to:"/pos",class:"nav-link","active-class":"active"},{default:E(()=>[...a[8]||(a[8]=[v("svg",{class:"nav-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[v("rect",{x:"3",y:"4",width:"18",height:"14",rx:"1",ry:"1"}),v("line",{x1:"3",y1:"21",x2:"21",y2:"21"}),v("line",{x1:"9",y1:"12",x2:"9",y2:"8"}),v("line",{x1:"15",y1:"12",x2:"15",y2:"8"})],-1),v("span",{class:"nav-label"},"POS",-1)])]),_:1}),v("button",{class:"nav-link logout-link",onClick:f,title:"D√©connexion"},[...a[9]||(a[9]=[m('<svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-77f1dbe5><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4" data-v-77f1dbe5></path><polyline points="16 17 21 12 16 7" data-v-77f1dbe5></polyline><line x1="21" y1="12" x2="9" y2="12" data-v-77f1dbe5></line></svg><span class="nav-label" data-v-77f1dbe5>D√©connexion</span>',2)])])])]),v("main",zt,[x(s)])])}}},[["__scopeId","data-v-77f1dbe5"]]),Wt={__name:"App",setup(e){const{currentUser:t,initAuth:n}=Nt();pt();const a=l(()=>!!t.value);return C(()=>{n()}),(e,t)=>a.value?(k(),A(Jt,{key:0})):(k(),A(Et,{key:1}))}},Kt={class:"stats-section"},Qt={class:"stats-grid"},Zt={class:"stat-card"},Xt={class:"stat-content"},Yt={class:"stat-value"},en={class:"stat-card"},tn={class:"stat-content"},nn={class:"stat-value"},an={class:"stat-card"},ln={class:"stat-content"},sn={class:"stat-value"},on={class:"stat-card"},rn={class:"stat-content"},cn={class:"stat-value"},un={class:"services-section"},dn={class:"table-responsive"},pn={class:"services-table"},vn={class:"appointments-section"},mn={class:"appointments-list"},fn={class:"appointment-time"},hn={class:"time"},gn={class:"date"},yn={class:"appointment-info"},bn=_t({__name:"Dashboard",emits:["logout"],setup(e,{emit:t}){const n=o(!1),a=o({clients:128,appointments:24,revenue:3450,rating:4.8}),l=o([{id:1,name:"Coupe Femme",price:35,bookings:12},{id:2,name:"Coupe Homme",price:25,bookings:18},{id:3,name:"Coloration",price:50,bookings:8},{id:4,name:"Lissage Br√©silien",price:80,bookings:5},{id:5,name:"Soin Capillaire",price:40,bookings:10}]),s=o([{id:1,clientName:"Marie Dupont",service:"Coupe Femme",time:"10:00",date:"Aujourd'hui",status:"confirmed",statusLabel:"Confirm√©"},{id:2,clientName:"Jean Martin",service:"Coupe Homme",time:"11:30",date:"Aujourd'hui",status:"confirmed",statusLabel:"Confirm√©"},{id:3,clientName:"Sophie Bernard",service:"Coloration",time:"14:00",date:"Demain",status:"pending",statusLabel:"En attente"},{id:4,clientName:"Pierre Lefevre",service:"Soin Capillaire",time:"15:30",date:"Demain",status:"confirmed",statusLabel:"Confirm√©"}]);return C(()=>{const e=localStorage.getItem("darkMode");null!==e&&(n.value="true"===e)}),(e,t)=>(k(),p("div",{class:S(["dashboard-container",{"dark-mode":n.value}])},[t[17]||(t[17]=v("header",{class:"dashboard-header"},[v("div",{class:"header-left"},[v("h1",{class:"dashboard-title"},"CHEZ JK"),v("p",{class:"dashboard-subtitle"},"Tableau de Bord")])],-1)),v("main",{class:S(["dashboard-main",{"dark-mode":n.value}])},[v("section",Kt,[t[12]||(t[12]=v("h2",{class:"section-title"},"Statistiques",-1)),v("div",Qt,[v("div",Zt,[t[2]||(t[2]=v("div",{class:"stat-icon clients"},[v("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[v("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),v("circle",{cx:"12",cy:"7",r:"4"})])],-1)),v("div",Xt,[t[0]||(t[0]=v("h3",null,"Clients",-1)),v("p",Yt,b(a.value.clients),1),t[1]||(t[1]=v("span",{class:"stat-change positive"},"+12% ce mois",-1))])]),v("div",en,[t[5]||(t[5]=m('<div class="stat-icon appointments" data-v-e8babbf0><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-e8babbf0><rect x="3" y="4" width="18" height="18" rx="2" ry="2" data-v-e8babbf0></rect><line x1="16" y1="2" x2="16" y2="6" data-v-e8babbf0></line><line x1="8" y1="2" x2="8" y2="6" data-v-e8babbf0></line><line x1="3" y1="10" x2="21" y2="10" data-v-e8babbf0></line></svg></div>',1)),v("div",tn,[t[3]||(t[3]=v("h3",null,"Rendez-vous",-1)),v("p",nn,b(a.value.appointments),1),t[4]||(t[4]=v("span",{class:"stat-change positive"},"+8 cette semaine",-1))])]),v("div",an,[t[8]||(t[8]=v("div",{class:"stat-icon revenue"},[v("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[v("line",{x1:"12",y1:"1",x2:"12",y2:"23"}),v("path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"})])],-1)),v("div",ln,[t[6]||(t[6]=v("h3",null,"Chiffre d'affaires",-1)),v("p",sn,b(a.value.revenue)+"‚Ç¨",1),t[7]||(t[7]=v("span",{class:"stat-change positive"},"+25% vs mois dernier",-1))])]),v("div",on,[t[11]||(t[11]=v("div",{class:"stat-icon rating"},[v("svg",{viewBox:"0 0 24 24",fill:"currentColor",stroke:"currentColor","stroke-width":"1"},[v("polygon",{points:"12 2 15.09 10.26 23.77 11.27 17.77 17.27 19.24 25.77 12 21.27 4.76 25.77 6.23 17.27 0.23 11.27 8.91 10.26 12 2"})])],-1)),v("div",rn,[t[9]||(t[9]=v("h3",null,"Avis Clients",-1)),v("p",cn,b(a.value.rating)+"/5",1),t[10]||(t[10]=v("span",{class:"stat-change positive"},"Excellent",-1))])])])]),v("section",un,[t[15]||(t[15]=v("div",{class:"section-header"},[v("h2",{class:"section-title"},"Services"),v("button",{type:"button",class:"btn-add"},"+ Ajouter Service")],-1)),v("div",dn,[v("table",pn,[t[14]||(t[14]=v("thead",null,[v("tr",null,[v("th",null,"Service"),v("th",null,"Prix"),v("th",null,"R√©servations"),v("th",null,"Actions")])],-1)),v("tbody",null,[(k(!0),p(P,null,I(l.value,e=>(k(),p("tr",{key:e.id},[v("td",null,b(e.name),1),v("td",null,b(e.price)+"‚Ç¨",1),v("td",null,b(e.bookings),1),t[13]||(t[13]=v("td",{class:"actions-cell"},[v("button",{type:"button",class:"btn-action edit",title:"Modifier"}," ‚úèÔ∏è "),v("button",{type:"button",class:"btn-action delete",title:"Supprimer"}," üóëÔ∏è ")],-1))]))),128))])])])]),v("section",vn,[t[16]||(t[16]=v("h2",{class:"section-title"},"Rendez-vous √† venir",-1)),v("div",mn,[(k(!0),p(P,null,I(s.value,e=>(k(),p("div",{key:e.id,class:"appointment-card"},[v("div",fn,[v("span",hn,b(e.time),1),v("span",gn,b(e.date),1)]),v("div",yn,[v("h4",null,b(e.clientName),1),v("p",null,b(e.service),1)]),v("div",{class:S(["appointment-status",e.status])},b(e.statusLabel),3)]))),128))])])],2)],2))}},[["__scopeId","data-v-e8babbf0"]]);function kn(e,t){const n=o((()=>{const n=localStorage.getItem(e);if(n)try{return JSON.parse(n)}catch(a){return console.error(`Erreur lors du chargement de ${e}:`,a),t}return t})()),a=()=>{try{localStorage.setItem(e,JSON.stringify(n.value))}catch(t){console.error(`Erreur lors de la sauvegarde de ${e}:`,t)}};return{items:l(()=>n.value),addItem:e=>{const t={...e,id:n.value.length>0?Math.max(...n.value.map(e=>e.id))+1:1};return n.value.push(t),a(),t},updateItem:(e,t)=>{const l=n.value.findIndex(t=>t.id===e);return-1!==l?(n.value[l]={...n.value[l],...t},a(),n.value[l]):null},deleteItem:e=>{const t=n.value.findIndex(t=>t.id===e);if(-1!==t){const e=n.value.splice(t,1)[0];return a(),e}return null},reset:()=>{n.value=t,localStorage.removeItem(e)},search:(e,t=[])=>{if(!e)return n.value;const a=e.toLowerCase();return n.value.filter(e=>t.some(t=>String(e[t]).toLowerCase().includes(a)))},count:l(()=>n.value.length)}}const Cn={class:"services-page"},wn={class:"page-header"},xn={key:0,class:"success-message"},Sn={class:"services-content"},En={class:"services-grid"},An={class:"service-header"},Pn={class:"service-actions"},In=["onClick"],Rn=["onClick"],On={class:"service-body"},Nn={class:"service-info"},Tn={class:"info-item"},_n={class:"value"},Mn={class:"info-item"},Ln={class:"value"},qn={key:0,class:"service-description"},Vn={class:"form-group"},Dn={class:"form-group"},Bn={class:"form-group"},Un={class:"modal-actions"},Gn={type:"submit",class:"btn-primary"},jn=_t({__name:"Services",setup(e){const{items:t,addItem:a,updateItem:l,deleteItem:s}=kn("services",[{id:1,name:"Coupe Femme",price:35,bookings:12,description:"Coupe et brushing pour femme"},{id:2,name:"Coupe Homme",price:25,bookings:18,description:"Coupe classique pour homme"},{id:3,name:"Coloration",price:50,bookings:8,description:"Coloration compl√®te des cheveux"},{id:4,name:"Lissage Br√©silien",price:80,bookings:5,description:"Lissage br√©silien professionnel"},{id:5,name:"Soin Capillaire",price:40,bookings:10,description:"Soin profond et hydratant"}]),i=o(!1),r=o(null),c=o(""),d=u({name:"",price:0,description:""}),m=()=>{d.name.trim()?d.price<=0?alert("Le prix doit √™tre sup√©rieur √† 0"):d.duration<=0?alert("La dur√©e doit √™tre sup√©rieure √† 0"):(r.value?(l(r.value.id,{...d}),c.value="Service modifi√© avec succ√®s!"):(a({...d,bookings:0}),c.value="Service ajout√© avec succ√®s!"),setTimeout(()=>{c.value=""},3e3),C(),i.value=!1):alert("Le nom du service est requis")},C=()=>{r.value=null,d.name="",d.price=0,d.description=""},w=()=>{C(),i.value=!1};return(e,a)=>(k(),p("div",Cn,[v("header",wn,[a[7]||(a[7]=v("div",null,[v("h1",{class:"page-title"},"Services"),v("p",{class:"page-subtitle"},"Gestion des services propos√©s par le salon")],-1)),v("button",{type:"button",class:"btn-primary",onClick:a[0]||(a[0]=e=>i.value=!0)},[...a[6]||(a[6]=[v("svg",{class:"icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[v("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),v("line",{x1:"5",y1:"12",x2:"19",y2:"12"})],-1),R(" Ajouter un service ",-1)])])]),c.value?(k(),p("div",xn,b(c.value),1)):h("",!0),v("div",Sn,[v("div",En,[(k(!0),p(P,null,I(n(t),e=>(k(),p("div",{key:e.id,class:"service-card"},[v("div",An,[v("h3",null,b(e.name),1),v("div",Pn,[v("button",{type:"button",class:"btn-icon edit",onClick:t=>(e=>{r.value={...e},d.name=e.name,d.price=e.price,d.description=e.description||"",i.value=!0})(e),title:"Modifier"},[...a[8]||(a[8]=[v("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[v("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),v("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})],-1)])],8,In),v("button",{type:"button",class:"btn-icon delete",onClick:t=>{return n=e.id,void(confirm("√ätes-vous s√ªr de vouloir supprimer ce service ?")&&(s(n),c.value="Service supprim√© avec succ√®s!",setTimeout(()=>{c.value=""},3e3)));var n},title:"Supprimer"},[...a[9]||(a[9]=[v("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[v("polyline",{points:"3 6 5 6 21 6"}),v("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})],-1)])],8,Rn)])]),v("div",On,[v("div",Nn,[v("div",Tn,[a[10]||(a[10]=v("span",{class:"label"},"Prix:",-1)),v("span",_n,b(e.price)+"‚Ç¨",1)]),v("div",Mn,[a[11]||(a[11]=v("span",{class:"label"},"R√©servations:",-1)),v("span",Ln,b(e.bookings),1)])]),e.description?(k(),p("div",qn,b(e.description),1)):h("",!0)])]))),128))])]),i.value?(k(),p("div",{key:1,class:"modal-overlay",onClick:w},[v("div",{class:"modal-content",onClick:a[5]||(a[5]=f(()=>{},["stop"]))},[v("h2",null,b(r.value?"Modifier le service":"Nouveau service"),1),v("form",{onSubmit:f(m,["prevent"])},[v("div",Vn,[a[12]||(a[12]=v("label",null,"Nom du service",-1)),g(v("input",{"onUpdate:modelValue":a[1]||(a[1]=e=>d.name=e),type:"text",required:""},null,512),[[y,d.name]])]),v("div",Dn,[a[13]||(a[13]=v("label",null,"Prix (‚Ç¨)",-1)),g(v("input",{"onUpdate:modelValue":a[2]||(a[2]=e=>d.price=e),type:"number",step:"0.01",required:""},null,512),[[y,d.price,void 0,{number:!0}]])]),v("div",Bn,[a[14]||(a[14]=v("label",null,"Description",-1)),g(v("textarea",{"onUpdate:modelValue":a[3]||(a[3]=e=>d.description=e),rows:"3"},null,512),[[y,d.description]])]),v("div",Un,[v("button",{type:"button",class:"btn-secondary",onClick:a[4]||(a[4]=e=>i.value=!1)}," Annuler "),v("button",Gn,b(r.value?"Modifier":"Ajouter"),1)])],32)])])):h("",!0)]))}},[["__scopeId","data-v-49d77ab7"]]),Fn={class:"personnel-page"},$n={key:0,class:"success-message"},Hn={class:"page-header"},zn={class:"personnel-content"},Jn={class:"personnel-grid"},Wn={class:"personnel-avatar"},Kn={class:"personnel-info"},Qn={class:"role"},Zn={class:"personnel-details"},Xn={class:"detail-item"},Yn={class:"detail-item"},ea={class:"detail-item"},ta={class:"personnel-actions"},na=["onClick"],aa=["onClick"],la={class:"form-group"},sa={class:"form-group"},oa={class:"form-group"},ia={class:"form-group"},ra={class:"form-group"},ca={class:"modal-actions"},ua={type:"submit",class:"btn-primary"},da=_t({__name:"Personnel",setup(e){const{items:t,addItem:a,updateItem:l,deleteItem:s}=kn("personnel",[{id:1,name:"Marie Dupont",role:"Coiffeuse",email:"marie.dupont@salon.fr",phone:"06 12 34 56 78",schedule:"Lun-Ven 9h-18h"},{id:2,name:"Jean Martin",role:"Coiffeur",email:"jean.martin@salon.fr",phone:"06 23 45 67 89",schedule:"Mar-Sam 10h-19h"},{id:3,name:"Sophie Bernard",role:"Coloriste",email:"sophie.bernard@salon.fr",phone:"06 34 56 78 90",schedule:"Mer-Dim 9h-17h"}]),i=o(!1),r=o(null),c=o(""),d=u({name:"",role:"",email:"",phone:"",schedule:""}),C=()=>{d.name.trim()?d.email.includes("@")?(r.value?(l(r.value.id,{...d}),c.value="Membre modifi√© avec succ√®s!"):(a({...d}),c.value="Membre ajout√© avec succ√®s!"),setTimeout(()=>{c.value=""},3e3),w(),i.value=!1):alert("Veuillez entrer une adresse email valide"):alert("Le nom est requis")},w=()=>{r.value=null,d.name="",d.role="",d.email="",d.phone="",d.schedule=""},x=()=>{w(),i.value=!1};return(e,a)=>(k(),p("div",Fn,[c.value?(k(),p("div",$n,b(c.value),1)):h("",!0),v("header",Hn,[a[10]||(a[10]=v("div",null,[v("h1",{class:"page-title"},"Personnel"),v("p",{class:"page-subtitle"},"Gestion du personnel du salon")],-1)),v("button",{type:"button",class:"btn-primary",onClick:a[0]||(a[0]=e=>i.value=!0)},[...a[9]||(a[9]=[v("svg",{class:"icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[v("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),v("line",{x1:"5",y1:"12",x2:"19",y2:"12"})],-1),R(" Ajouter un membre ",-1)])])]),v("div",zn,[v("div",Jn,[(k(!0),p(P,null,I(n(t),e=>{return k(),p("div",{key:e.id,class:"personnel-card"},[v("div",Wn,[v("span",null,b((t=e.name,t.split(" ").map(e=>e[0]).join("").toUpperCase().slice(0,2))),1)]),v("div",Kn,[v("h3",null,b(e.name),1),v("p",Qn,b(e.role),1),v("div",Zn,[v("div",Xn,[a[11]||(a[11]=v("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[v("path",{d:"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"}),v("polyline",{points:"22,6 12,13 2,6"})],-1)),v("span",null,b(e.email),1)]),v("div",Yn,[a[12]||(a[12]=v("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[v("path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"})],-1)),v("span",null,b(e.phone),1)]),v("div",ea,[a[13]||(a[13]=m('<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-d993b35f><rect x="3" y="4" width="18" height="18" rx="2" ry="2" data-v-d993b35f></rect><line x1="16" y1="2" x2="16" y2="6" data-v-d993b35f></line><line x1="8" y1="2" x2="8" y2="6" data-v-d993b35f></line><line x1="3" y1="10" x2="21" y2="10" data-v-d993b35f></line></svg>',1)),v("span",null,b(e.schedule),1)])])]),v("div",ta,[v("button",{type:"button",class:"btn-icon edit",onClick:t=>(e=>{r.value={...e},d.name=e.name,d.role=e.role,d.email=e.email,d.phone=e.phone,d.schedule=e.schedule,i.value=!0})(e),title:"Modifier"},[...a[14]||(a[14]=[v("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[v("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),v("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})],-1)])],8,na),v("button",{type:"button",class:"btn-icon delete",onClick:t=>{return n=e.id,void(confirm("√ätes-vous s√ªr de vouloir supprimer ce membre ?")&&(s(n),c.value="Membre supprim√© avec succ√®s!",setTimeout(()=>{c.value=""},3e3)));var n},title:"Supprimer"},[...a[15]||(a[15]=[v("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[v("polyline",{points:"3 6 5 6 21 6"}),v("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})],-1)])],8,aa)])]);var t}),128))])]),i.value?(k(),p("div",{key:1,class:"modal-overlay",onClick:a[8]||(a[8]=e=>x())},[v("div",{class:"modal-content",onClick:a[7]||(a[7]=f(()=>{},["stop"]))},[v("h2",null,b(r.value?"Modifier le membre":"Nouveau membre"),1),v("form",{onSubmit:f(C,["prevent"])},[v("div",la,[a[16]||(a[16]=v("label",null,"Nom complet",-1)),g(v("input",{"onUpdate:modelValue":a[1]||(a[1]=e=>d.name=e),type:"text",required:""},null,512),[[y,d.name]])]),v("div",sa,[a[18]||(a[18]=v("label",null,"R√¥le",-1)),g(v("select",{"onUpdate:modelValue":a[2]||(a[2]=e=>d.role=e),required:""},[...a[17]||(a[17]=[m('<option value="" data-v-d993b35f>S√©lectionner un r√¥le</option><option value="Coiffeur/Coiffeuse" data-v-d993b35f>Coiffeur/Coiffeuse</option><option value="Styliste" data-v-d993b35f>Styliste</option><option value="Coloriste" data-v-d993b35f>Coloriste</option><option value="Esth√©ticienne" data-v-d993b35f>Esth√©ticienne</option><option value="G√©rant" data-v-d993b35f>G√©rant</option>',6)])],512),[[O,d.role]])]),v("div",oa,[a[19]||(a[19]=v("label",null,"Email",-1)),g(v("input",{"onUpdate:modelValue":a[3]||(a[3]=e=>d.email=e),type:"email",required:""},null,512),[[y,d.email]])]),v("div",ia,[a[20]||(a[20]=v("label",null,"T√©l√©phone",-1)),g(v("input",{"onUpdate:modelValue":a[4]||(a[4]=e=>d.phone=e),type:"tel",required:""},null,512),[[y,d.phone]])]),v("div",ra,[a[21]||(a[21]=v("label",null,"Horaires",-1)),g(v("input",{"onUpdate:modelValue":a[5]||(a[5]=e=>d.schedule=e),type:"text",placeholder:"Ex: Lun-Ven 9h-18h"},null,512),[[y,d.schedule]])]),v("div",ca,[v("button",{type:"button",class:"btn-secondary",onClick:a[6]||(a[6]=e=>x())}," Annuler "),v("button",ua,b(r.value?"Modifier":"Ajouter"),1)])],32)])])):h("",!0)]))}},[["__scopeId","data-v-d993b35f"]]),pa=o([]),va=o([]);!function(){try{const e=localStorage.getItem("clients"),t=localStorage.getItem("invoices");e?pa.value=JSON.parse(e):(pa.value=[{id:1,name:"Marie Dupont",email:"marie@example.com",phone:"06 12 34 56 78",joinDate:"2024-01-15",loyaltyPoints:450,totalSpent:1250,notes:"Cliente r√©guli√®re"},{id:2,name:"Jean Martin",email:"jean@example.com",phone:"06 98 76 54 32",joinDate:"2024-03-20",loyaltyPoints:200,totalSpent:600,notes:""},{id:3,name:"Sophie Laurent",email:"sophie@example.com",phone:"06 45 67 89 01",joinDate:"2024-06-10",loyaltyPoints:850,totalSpent:2100,notes:"VIP - Cliente premium"}],saveClientsToStorage()),t&&(va.value=JSON.parse(t))}catch(e){console.error("Error loading clients:",e)}}();const ma={class:"pos-page"},fa={key:0,class:"success-message"},ha={key:1,class:"access-denied"},ga={class:"denied-content"},ya={class:"role-info"},ba={key:2},ka={class:"page-header"},Ca={class:"header-stats"},wa={class:"stat-badge"},xa={class:"stat-value"},Sa={class:"stat-badge"},Ea={class:"stat-value"},Aa={class:"stat-badge"},Pa={class:"stat-value"},Ia={class:"pos-content"},Ra={class:"left-panel"},Oa={class:"client-section"},Na={key:0,class:"selected-client"},Ta={class:"client-info"},_a={class:"client-details"},Ma={class:"client-email"},La={class:"loyalty-info"},qa={class:"loyalty-points"},Va={key:1,class:"client-selector"},Da=["value"],Ba={key:2,class:"new-client-form"},Ua={class:"cart-section"},Ga={class:"section-header"},ja={class:"cart-items"},Fa={key:0,class:"empty-state"},$a={class:"item-info"},Ha={class:"item-name"},za={class:"item-price"},Ja={class:"item-controls"},Wa=["onClick"],Ka={class:"qty"},Qa=["onClick"],Za=["onClick"],Xa={class:"item-total"},Ya={key:0,class:"cart-footer"},el={class:"total-row"},tl={class:"total-amount"},nl={class:"middle-panel"},al={class:"services-section"},ll={class:"section-header"},sl={class:"services-grid"},ol=["onClick"],il={class:"service-name"},rl={class:"service-price"},cl={class:"right-panel"},ul={class:"invoices-section"},dl={class:"section-header"},pl={class:"invoices-list"},vl={key:0,class:"empty-state"},ml={class:"invoice-header"},fl={class:"invoice-number"},hl={class:"invoice-status"},gl={class:"invoice-client"},yl={class:"invoice-items"},bl={class:"invoice-total"},kl={class:"invoice-actions"},Cl=["onClick"],wl=["onClick"],xl={class:"payment-info"},Sl={class:"info-row"},El={class:"highlight"},Al={class:"info-row"},Pl={class:"highlight"},Il={class:"payment-methods"},Rl=["onClick"],Ol={class:"icon"},Nl={class:"reason-input"},Tl={class:"modal-actions"},_l=_t({__name:"POS",setup(e){const{currentUser:t,ROLES:a}=Nt(),{clients:s,invoices:i,createInvoice:r,payInvoice:c,cancelInvoice:u,addClient:d}=function(){const e=()=>{try{localStorage.setItem("clients",JSON.stringify(pa.value))}catch(e){console.error("Error saving clients to storage:",e)}},t=()=>{try{localStorage.setItem("invoices",JSON.stringify(va.value))}catch(e){console.error("Error saving invoices to storage:",e)}},n=(t,n)=>{const a=pa.value.find(e=>e.id===t);if(a){a.totalSpent+=n;const t=Math.floor(n/5);return a.loyaltyPoints+=t,e(),a}return null};return{clients:pa,invoices:va,getClients:()=>pa.value,addClient:t=>{const n={id:Math.max(...pa.value.map(e=>e.id),0)+1,name:t.name,email:t.email,phone:t.phone,joinDate:(new Date).toISOString().split("T")[0],loyaltyPoints:0,totalSpent:0,notes:t.notes||""};return pa.value.push(n),e(),n},updateClient:(t,n)=>{const a=pa.value.findIndex(e=>e.id===t);return-1!==a?(pa.value[a]={...pa.value[a],...n},e(),pa.value[a]):null},deleteClient:t=>{const n=pa.value.findIndex(e=>e.id===t);return-1!==n&&(pa.value.splice(n,1),e(),!0)},addLoyaltyPoints:(t,n)=>{const a=pa.value.find(e=>e.id===t);return a?(a.loyaltyPoints+=n,e(),a):null},useLoyaltyPoints:(t,n)=>{const a=pa.value.find(e=>e.id===t);return a&&a.loyaltyPoints>=n?(a.loyaltyPoints-=n,e(),a):null},updateTotalSpent:n,createInvoice:e=>{const n={id:Math.max(...va.value.map(e=>e.id),0)+1,invoiceNumber:`FAC-${Date.now()}`,clientId:e.clientId,items:e.items,subtotal:e.subtotal,discount:e.discount||0,total:e.total,status:"pending",paymentMethod:null,createdAt:(new Date).toISOString(),paidAt:null,notes:e.notes||"",cashier:e.cashier||"Caissier"};return va.value.push(n),t(),n},getInvoices:()=>va.value,getPendingInvoices:e=>va.value.filter(t=>t.clientId===e&&"pending"===t.status),payInvoice:(e,a)=>{const l=va.value.find(t=>t.id===e);return l?(l.status="paid",l.paymentMethod=a,l.paidAt=(new Date).toISOString(),t(),n(l.clientId,l.total),l):null},cancelInvoice:(e,n="")=>{const a=va.value.find(t=>t.id===e);return a&&"pending"===a.status?(a.status="cancelled",a.cancelReason=n,a.cancelledAt=(new Date).toISOString(),t(),a):null},getClientStats:e=>{const t=pa.value.find(t=>t.id===e);if(!t)return null;const n=va.value.filter(t=>t.clientId===e&&"paid"===t.status).length,a=n>0?t.totalSpent/n:0;return{client:t,totalInvoices:n,totalSpent:t.totalSpent,averageInvoice:a,loyaltyPoints:t.loyaltyPoints}}}}(),m=l(()=>!!t.value&&(t.value.role===a.CAISSIER||t.value.role===a.GERANTE));l(()=>t.value?.role===a.GERANTE);const C=l(()=>!!t.value&&t.value.role===a.GERANTE),{items:w}=kn("pos_services",[{id:1,name:"Coupe Femme",purchasePrice:15,salePrice:35,unit:"service"},{id:2,name:"Coupe Homme",purchasePrice:10,salePrice:25,unit:"service"},{id:3,name:"Coloration",purchasePrice:25,salePrice:50,unit:"service"},{id:4,name:"Lissage Br√©silien",purchasePrice:40,salePrice:80,unit:"service"},{id:5,name:"Soin Capillaire",purchasePrice:20,salePrice:40,unit:"service"},{id:6,name:"Brushing",purchasePrice:8,salePrice:20,unit:"service"},{id:7,name:"M√®ches",purchasePrice:30,salePrice:60,unit:"service"},{id:8,name:"Permanente",purchasePrice:35,salePrice:70,unit:"service"}]),x=o([]),E=o(""),A=o(!1),R=o({name:"",phone:"",email:""}),N=o(""),T=o(""),_=o(""),M=o(null),L=o(null),q=o(""),V={card:"üí≥",cash:"üíµ",check:"‚úì"},D={card:"Carte",cash:"Esp√®ces",check:"Ch√®que"},B=l(()=>s.value.find(e=>e.id===parseInt(E.value))),U=l(()=>N.value?w.value.filter(e=>e.name.toLowerCase().includes(N.value.toLowerCase())):w.value),G=l(()=>x.value.reduce((e,t)=>e+t.salePrice*t.quantity,0)),j=l(()=>i.value.filter(e=>"paid"===e.status).reduce((e,t)=>e+t.total,0)),F=l(()=>T.value?i.value.filter(e=>e.status===T.value):i.value),$=l(()=>i.value.filter(e=>"pending"===e.status).length),H=e=>{x.value.splice(e,1)},z=()=>{confirm("Vider le panier ?")&&(x.value=[])},J=()=>{if(!R.value.name.trim())return void alert("Le nom est requis");const e=d(R.value);E.value=e.id,R.value={name:"",phone:"",email:""},A.value=!1,_.value="‚úì Client ajout√©",setTimeout(()=>{_.value=""},2e3)},W=e=>{const t=s.value.find(t=>t.id===e);return t?t.name:"Client inconnu"},K=()=>{if(0===x.value.length)return void alert("Le panier est vide");const e=r({clientId:E.value?parseInt(E.value):null,items:[...x.value],subtotal:G.value,total:G.value,cashier:t.value.name});x.value=[],_.value=`‚úì Facture cr√©√©e: ${e.invoiceNumber}`,setTimeout(()=>{_.value=""},2e3)},Q=()=>{M.value=null},Z=()=>{L.value&&(u(L.value.id,q.value),_.value="‚úì Facture annul√©e",setTimeout(()=>{_.value=""},2e3),L.value=null)};return(e,a)=>(k(),p("div",ma,[_.value?(k(),p("div",fa,b(_.value),1)):h("",!0),m.value?(k(),p("div",ba,[v("header",ka,[a[19]||(a[19]=v("div",null,[v("h1",{class:"page-title"},"Point de Vente"),v("p",{class:"page-subtitle"},"Gestion des ventes et encaissements")],-1)),v("div",Ca,[v("div",wa,[a[16]||(a[16]=v("span",{class:"stat-label"},"Total du jour",-1)),v("span",xa,b(j.value)+"‚Ç¨",1)]),v("div",Sa,[a[17]||(a[17]=v("span",{class:"stat-label"},"Factures",-1)),v("span",Ea,b(n(i).length),1)]),v("div",Aa,[a[18]||(a[18]=v("span",{class:"stat-label"},"En attente",-1)),v("span",Pa,b($.value),1)])])]),v("div",Ia,[v("div",Ra,[v("div",Oa,[a[22]||(a[22]=v("div",{class:"section-header"},[v("h2",null,"Client")],-1)),B.value?(k(),p("div",Na,[v("div",Ta,[v("h3",null,b(B.value.name),1),v("p",_a,b(B.value.phone),1),v("p",Ma,b(B.value.email),1)]),v("div",La,[a[20]||(a[20]=v("span",{class:"loyalty-label"},"Points fid√©lit√©:",-1)),v("span",qa,b(B.value.loyaltyPoints),1)]),v("button",{onClick:a[0]||(a[0]=e=>B.value=null),class:"btn-change-client"}," Changer de client ")])):(k(),p("div",Va,[g(v("select",{"onUpdate:modelValue":a[1]||(a[1]=e=>E.value=e),class:"client-select"},[a[21]||(a[21]=v("option",{value:""},"-- S√©lectionner un client --",-1)),(k(!0),p(P,null,I(n(s),e=>(k(),p("option",{key:e.id,value:e.id},b(e.name)+" ("+b(e.loyaltyPoints)+" pts) ",9,Da))),128))],512),[[O,E.value]]),v("button",{onClick:a[2]||(a[2]=e=>A.value=!A.value),class:"btn-new-client"}," + Nouveau client ")])),A.value?(k(),p("div",Ba,[g(v("input",{"onUpdate:modelValue":a[3]||(a[3]=e=>R.value.name=e),type:"text",placeholder:"Nom complet"},null,512),[[y,R.value.name]]),g(v("input",{"onUpdate:modelValue":a[4]||(a[4]=e=>R.value.phone=e),type:"tel",placeholder:"T√©l√©phone"},null,512),[[y,R.value.phone]]),g(v("input",{"onUpdate:modelValue":a[5]||(a[5]=e=>R.value.email=e),type:"email",placeholder:"Email"},null,512),[[y,R.value.email]]),v("button",{onClick:J,class:"btn-add"},"Ajouter"),v("button",{onClick:a[6]||(a[6]=e=>A.value=!1),class:"btn-cancel"}," Annuler ")])):h("",!0)]),v("div",Ua,[v("div",Ga,[v("h2",null,"Panier ("+b(x.value.length)+")",1),x.value.length>0?(k(),p("button",{key:0,onClick:z,class:"btn-clear-small"}," Vider ")):h("",!0)]),v("div",ja,[0===x.value.length?(k(),p("div",Fa,[...a[23]||(a[23]=[v("p",null,"Panier vide",-1)])])):h("",!0),(k(!0),p(P,null,I(x.value,(e,t)=>(k(),p("div",{key:t,class:"cart-item"},[v("div",$a,[v("span",Ha,b(e.name),1),v("span",za,b(e.salePrice)+"‚Ç¨",1)]),v("div",Ja,[v("button",{onClick:e=>{return n=t,void(x.value[n].quantity>1?x.value[n].quantity--:H(n));var n},class:"qty-btn"},"‚àí",8,Wa),v("span",Ka,b(e.quantity),1),v("button",{onClick:e=>{return n=t,void x.value[n].quantity++;var n},class:"qty-btn"},"+",8,Qa),v("button",{onClick:e=>H(t),class:"remove-btn"}," ‚úï ",8,Za)]),v("div",Xa,b((e.salePrice*e.quantity).toFixed(2))+"‚Ç¨ ",1)]))),128))]),x.value.length>0?(k(),p("div",Ya,[v("div",el,[a[24]||(a[24]=v("span",null,"Total:",-1)),v("span",tl,b(G.value.toFixed(2))+"‚Ç¨",1)]),v("button",{onClick:K,class:"btn-create-invoice"}," üìÑ Cr√©er Facture ")])):h("",!0)])]),v("div",nl,[v("div",al,[v("div",ll,[a[25]||(a[25]=v("h2",null,"Services",-1)),g(v("input",{"onUpdate:modelValue":a[7]||(a[7]=e=>N.value=e),type:"text",placeholder:"Rechercher...",class:"search-input"},null,512),[[y,N.value]])]),v("div",sl,[(k(!0),p(P,null,I(U.value,e=>(k(),p("button",{key:e.id,onClick:t=>(e=>{const t=x.value.find(t=>t.id===e.id);t?t.quantity++:x.value.push({...e,quantity:1})})(e),class:"service-btn"},[v("span",il,b(e.name),1),v("span",rl,b(e.salePrice)+"‚Ç¨",1)],8,ol))),128))])])]),v("div",cl,[v("div",ul,[v("div",dl,[v("h2",null,"Factures ("+b(n(i).length)+")",1),g(v("select",{"onUpdate:modelValue":a[8]||(a[8]=e=>T.value=e),class:"filter-select"},[...a[26]||(a[26]=[v("option",{value:""},"Toutes",-1),v("option",{value:"pending"},"En attente",-1),v("option",{value:"paid"},"Pay√©es",-1)])],512),[[O,T.value]])]),v("div",pl,[0===F.value.length?(k(),p("div",vl,[...a[27]||(a[27]=[v("p",null,"Aucune facture",-1)])])):h("",!0),(k(!0),p(P,null,I(F.value,e=>(k(),p("div",{key:e.id,class:S(["invoice-card",`status-${e.status}`])},[v("div",ml,[v("span",fl,b(e.invoiceNumber),1),v("span",hl,b(e.status),1)]),v("div",gl,b(W(e.clientId)),1),v("div",yl,[(k(!0),p(P,null,I(e.items,e=>(k(),p("div",{key:e.id,class:"invoice-item"},[v("span",null,b(e.name)+" √ó"+b(e.quantity),1),v("span",null,b((e.salePrice*e.quantity).toFixed(2))+"‚Ç¨",1)]))),128))]),v("div",bl,[v("strong",null,b(e.total.toFixed(2))+"‚Ç¨",1)]),v("div",kl,["pending"===e.status?(k(),p("button",{key:0,onClick:t=>(e=>{M.value=e})(e),class:"btn-pay"}," Payer ",8,Cl)):h("",!0),"pending"===e.status&&C.value?(k(),p("button",{key:1,onClick:t=>(e=>{L.value=e,q.value=""})(e),class:"btn-cancel-invoice"}," Annuler ",8,wl)):h("",!0)])],2))),128))])])])]),M.value?(k(),p("div",{key:0,class:"modal-overlay",onClick:Q},[v("div",{class:"modal-content",onClick:a[9]||(a[9]=f(()=>{},["stop"]))},[a[30]||(a[30]=v("h2",null,"Paiement Facture",-1)),v("div",xl,[v("div",Sl,[a[28]||(a[28]=v("span",null,"Facture:",-1)),v("span",El,b(M.value.invoiceNumber),1)]),v("div",Al,[a[29]||(a[29]=v("span",null,"Montant:",-1)),v("span",Pl,b(M.value.total.toFixed(2))+"‚Ç¨",1)])]),v("div",Il,[(k(),p(P,null,I(["card","cash","check"],e=>v("button",{key:e,onClick:t=>(e=>{M.value&&(c(M.value.id,e),_.value=`‚úì Facture pay√©e (${D[e]})`,setTimeout(()=>{_.value=""},2e3),M.value=null)})(e),class:S(`payment-btn ${e}`)},[v("span",Ol,b(V[e]),1),v("span",null,b(D[e]),1)],10,Rl)),64))]),v("button",{onClick:Q,class:"btn-secondary"}," Annuler ")])])):h("",!0),L.value?(k(),p("div",{key:1,class:"modal-overlay",onClick:a[13]||(a[13]=e=>L.value=null)},[v("div",{class:"modal-content",onClick:a[12]||(a[12]=f(()=>{},["stop"]))},[a[32]||(a[32]=v("h2",null,"Annuler la Facture",-1)),a[33]||(a[33]=v("p",null,"√ätes-vous s√ªr de vouloir annuler cette facture ?",-1)),v("div",Nl,[a[31]||(a[31]=v("label",null,"Raison (optionnel):",-1)),g(v("textarea",{"onUpdate:modelValue":a[10]||(a[10]=e=>q.value=e),placeholder:"Raison de l'annulation...",rows:"3"},null,512),[[y,q.value]])]),v("div",Tl,[v("button",{onClick:Z,class:"btn-danger"}," Oui, annuler "),v("button",{onClick:a[11]||(a[11]=e=>L.value=null),class:"btn-secondary"}," Non, conserver ")])])])):h("",!0)])):(k(),p("div",ha,[v("div",ga,[a[14]||(a[14]=v("h2",null,"Acc√®s refus√©",-1)),a[15]||(a[15]=v("p",null,"Vous n'avez pas acc√®s au point de vente.",-1)),v("p",ya,"Votre r√¥le: "+b(n(t).role),1)])]))]))}},[["__scopeId","data-v-b2da0e20"]]),Ml={class:"stock-page"},Ll={key:0,class:"success-message"},ql={class:"page-header"},Vl={class:"stock-content"},Dl={class:"stock-stats"},Bl={class:"stat-card"},Ul={class:"stat-info"},Gl={class:"stat-value"},jl={class:"stat-card"},Fl={class:"stat-info"},$l={class:"stat-value"},Hl={class:"stat-card"},zl={class:"stat-info"},Jl={class:"stat-value"},Wl={class:"products-section"},Kl={class:"section-header"},Ql={class:"search-box"},Zl={class:"products-grid"},Xl={class:"product-header"},Yl={class:"product-actions"},es=["onClick"],ts=["onClick"],ns={class:"product-body"},as={class:"product-info"},ls={class:"info-row"},ss={class:"info-row"},os={class:"value"},is={class:"info-row"},rs={class:"value"},cs={class:"info-row"},us={class:"value"},ds={class:"info-row"},ps={class:"value highlight"},vs={key:0,class:"product-description"},ms={key:1,class:"stock-alert"},fs={class:"form-group"},hs={class:"form-row"},gs={class:"form-group"},ys={class:"form-group"},bs={class:"form-row"},ks={class:"form-group"},Cs={class:"form-group"},ws={class:"form-group"},xs={class:"form-group"},Ss={class:"modal-actions"},Es={type:"submit",class:"btn-primary"},As=[{path:"/",name:"Login",component:Et},{path:"/dashboard",name:"Dashboard",component:bn,meta:{requiresAuth:!0}},{path:"/services",name:"Services",component:jn,meta:{requiresAuth:!0,requiresRole:"gerante"}},{path:"/personnel",name:"Personnel",component:da,meta:{requiresAuth:!0,requiresRole:"gerante"}},{path:"/stock",name:"Stock",component:_t({__name:"Stock",setup(e){const{items:t,addItem:n,updateItem:a,deleteItem:s,search:i}=kn("stock",[{id:1,name:"Shampooing Professionnel",quantity:15,unit:"bouteille",purchasePrice:8.5,salePrice:15,minStock:10,description:"Shampooing pour cheveux color√©s"},{id:2,name:"Masque Capillaire",quantity:8,unit:"pot",purchasePrice:12,salePrice:25,minStock:10,description:"Masque hydratant intensif"},{id:3,name:"Coloration L'Or√©al",quantity:25,unit:"bo√Æte",purchasePrice:5.5,salePrice:12,minStock:15,description:"Coloration permanente"},{id:4,name:"Gants Jetables",quantity:5,unit:"paquet",purchasePrice:3,salePrice:6,minStock:10,description:"Paquet de 100 gants"}]),r=o(!1),c=o(null),d=o(""),C=o(""),w=u({name:"",quantity:0,unit:"bouteille",purchasePrice:0,salePrice:0,minStock:0,description:""}),x=l(()=>C.value?i(C.value,["name","description"]):t.value),E=l(()=>t.value.length),A=l(()=>t.value.filter(e=>e.quantity<=e.minStock).length),N=l(()=>t.value.reduce((e,t)=>e+t.quantity*t.purchasePrice,0).toFixed(2)),T=()=>{w.name.trim()?w.quantity<0?alert("La quantit√© ne peut pas √™tre n√©gative"):w.purchasePrice<=0||w.salePrice<=0?alert("Les prix doivent √™tre sup√©rieurs √† 0"):(c.value?(a(c.value.id,{...w}),d.value="Produit modifi√© avec succ√®s!"):(n({...w}),d.value="Produit ajout√© avec succ√®s!"),setTimeout(()=>{d.value=""},3e3),_(),r.value=!1):alert("Le nom du produit est requis")},_=()=>{c.value=null,w.name="",w.quantity=0,w.unit="bouteille",w.purchasePrice=0,w.salePrice=0,w.minStock=0,w.description=""},M=()=>{_(),r.value=!1};return(e,t)=>(k(),p("div",Ml,[d.value?(k(),p("div",Ll,b(d.value),1)):h("",!0),v("header",ql,[t[13]||(t[13]=v("div",null,[v("h1",{class:"page-title"},"Gestion du Stock"),v("p",{class:"page-subtitle"},"Gestion des produits et inventaire")],-1)),v("button",{type:"button",class:"btn-primary",onClick:t[0]||(t[0]=e=>r.value=!0)},[...t[12]||(t[12]=[v("svg",{class:"icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[v("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),v("line",{x1:"5",y1:"12",x2:"19",y2:"12"})],-1),R(" Ajouter un produit ",-1)])])]),v("div",Vl,[v("div",Dl,[v("div",Bl,[t[15]||(t[15]=v("div",{class:"stat-icon"},[v("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[v("path",{d:"M20 7h-4V4c0-1.1-.9-2-2-2h-4c-1.1 0-2 .9-2 2v3H4c-1.1 0-2 .9-2 2v11c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V9c0-1.1-.9-2-2-2z"})])],-1)),v("div",Ul,[t[14]||(t[14]=v("span",{class:"stat-label"},"Total produits",-1)),v("span",Gl,b(E.value),1)])]),v("div",jl,[t[17]||(t[17]=m('<div class="stat-icon warning" data-v-442787af><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-442787af><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z" data-v-442787af></path><line x1="12" y1="9" x2="12" y2="13" data-v-442787af></line><line x1="12" y1="17" x2="12.01" y2="17" data-v-442787af></line></svg></div>',1)),v("div",Fl,[t[16]||(t[16]=v("span",{class:"stat-label"},"Stock faible",-1)),v("span",$l,b(A.value),1)])]),v("div",Hl,[t[19]||(t[19]=v("div",{class:"stat-icon success"},[v("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[v("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),v("polyline",{points:"22 4 12 14.01 9 11.01"})])],-1)),v("div",zl,[t[18]||(t[18]=v("span",{class:"stat-label"},"Valeur totale",-1)),v("span",Jl,b(N.value)+"‚Ç¨",1)])])]),v("div",Wl,[v("div",Kl,[t[21]||(t[21]=v("h2",null,"Produits en stock",-1)),v("div",Ql,[t[20]||(t[20]=v("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[v("circle",{cx:"11",cy:"11",r:"8"}),v("path",{d:"M21 21l-4.35-4.35"})],-1)),g(v("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>C.value=e),type:"text",placeholder:"Rechercher un produit..."},null,512),[[y,C.value]])])]),v("div",Zl,[(k(!0),p(P,null,I(x.value,e=>(k(),p("div",{key:e.id,class:S(["product-card",{"low-stock":e.quantity<=e.minStock}])},[v("div",Xl,[v("h3",null,b(e.name),1),v("div",Yl,[v("button",{type:"button",class:"btn-icon edit",onClick:t=>(e=>{c.value={...e},w.name=e.name,w.quantity=e.quantity,w.unit=e.unit,w.purchasePrice=e.purchasePrice,w.salePrice=e.salePrice,w.minStock=e.minStock,w.description=e.description,r.value=!0})(e),title:"Modifier"},[...t[22]||(t[22]=[v("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[v("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),v("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})],-1)])],8,es),v("button",{type:"button",class:"btn-icon delete",onClick:t=>{return n=e.id,void(confirm("√ätes-vous s√ªr de vouloir supprimer ce produit ?")&&(s(n),d.value="Produit supprim√© avec succ√®s!",setTimeout(()=>{d.value=""},3e3)));var n},title:"Supprimer"},[...t[23]||(t[23]=[v("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[v("polyline",{points:"3 6 5 6 21 6"}),v("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})],-1)])],8,ts)])]),v("div",ns,[v("div",as,[v("div",ls,[t[24]||(t[24]=v("span",{class:"label"},"Quantit√©:",-1)),v("span",{class:S(["value",{"low-stock-text":e.quantity<=e.minStock}])},b(e.quantity)+" "+b(e.unit),3)]),v("div",ss,[t[25]||(t[25]=v("span",{class:"label"},"Prix d'achat:",-1)),v("span",os,b(e.purchasePrice)+"‚Ç¨",1)]),v("div",is,[t[26]||(t[26]=v("span",{class:"label"},"Prix de vente:",-1)),v("span",rs,b(e.salePrice)+"‚Ç¨",1)]),v("div",cs,[t[27]||(t[27]=v("span",{class:"label"},"Stock minimum:",-1)),v("span",us,b(e.minStock)+" "+b(e.unit),1)]),v("div",ds,[t[28]||(t[28]=v("span",{class:"label"},"Valeur stock:",-1)),v("span",ps,b((e.quantity*e.purchasePrice).toFixed(2))+"‚Ç¨",1)])]),e.description?(k(),p("div",vs,b(e.description),1)):h("",!0),e.quantity<=e.minStock?(k(),p("div",ms," ‚ö†Ô∏è Stock faible ! R√©approvisionnement n√©cessaire ")):h("",!0)])],2))),128))])])]),r.value?(k(),p("div",{key:1,class:"modal-overlay",onClick:t[11]||(t[11]=e=>M())},[v("div",{class:"modal-content",onClick:t[10]||(t[10]=f(()=>{},["stop"]))},[v("h2",null,b(c.value?"Modifier le produit":"Nouveau produit"),1),v("form",{onSubmit:f(T,["prevent"])},[v("div",fs,[t[29]||(t[29]=v("label",null,"Nom du produit",-1)),g(v("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>w.name=e),type:"text",required:""},null,512),[[y,w.name]])]),v("div",hs,[v("div",gs,[t[30]||(t[30]=v("label",null,"Quantit√©",-1)),g(v("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>w.quantity=e),type:"number",min:"0",required:""},null,512),[[y,w.quantity,void 0,{number:!0}]])]),v("div",ys,[t[32]||(t[32]=v("label",null,"Unit√©",-1)),g(v("select",{"onUpdate:modelValue":t[4]||(t[4]=e=>w.unit=e),required:""},[...t[31]||(t[31]=[m('<option value="bouteille" data-v-442787af>Bouteille</option><option value="pot" data-v-442787af>Pot</option><option value="bo√Æte" data-v-442787af>Bo√Æte</option><option value="paquet" data-v-442787af>Paquet</option><option value="kg" data-v-442787af>Kg</option><option value="L" data-v-442787af>L</option><option value="ml" data-v-442787af>ml</option>',7)])],512),[[O,w.unit]])])]),v("div",bs,[v("div",ks,[t[33]||(t[33]=v("label",null,"Prix d'achat (‚Ç¨)",-1)),g(v("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>w.purchasePrice=e),type:"number",step:"0.01",min:"0",required:""},null,512),[[y,w.purchasePrice,void 0,{number:!0}]])]),v("div",Cs,[t[34]||(t[34]=v("label",null,"Prix de vente (‚Ç¨)",-1)),g(v("input",{"onUpdate:modelValue":t[6]||(t[6]=e=>w.salePrice=e),type:"number",step:"0.01",min:"0",required:""},null,512),[[y,w.salePrice,void 0,{number:!0}]])])]),v("div",ws,[t[35]||(t[35]=v("label",null,"Stock minimum",-1)),g(v("input",{"onUpdate:modelValue":t[7]||(t[7]=e=>w.minStock=e),type:"number",min:"0",required:""},null,512),[[y,w.minStock,void 0,{number:!0}]])]),v("div",xs,[t[36]||(t[36]=v("label",null,"Description",-1)),g(v("textarea",{"onUpdate:modelValue":t[8]||(t[8]=e=>w.description=e),rows:"3"},null,512),[[y,w.description]])]),v("div",Ss,[v("button",{type:"button",class:"btn-secondary",onClick:t[9]||(t[9]=e=>M())}," Annuler "),v("button",Es,b(c.value?"Modifier":"Ajouter"),1)])],32)])])):h("",!0)]))}},[["__scopeId","data-v-442787af"]]),meta:{requiresAuth:!0,requiresRole:"gerante"}},{path:"/pos",name:"POS",component:_l,meta:{requiresAuth:!0,requiresRole:["gerante","caissier"]}}],Ps=function(t){const l=Ye(t.routes,t),s=t.parseQuery||Ae,o=t.stringifyQuery||Pe,i=t.history,r=Me(),u=Me(),d=Me(),p=e(de);let v=de;T&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const m=L.bind(null,e=>""+e),f=L.bind(null,ne),h=L.bind(null,ae);function g(e,t){if(t=M({},t||p.value),"string"==typeof e){const n=se(s,e,t.path),a=l.resolve({path:n.path},t),o=i.createHref(n.fullPath);return M(n,a,{params:h(a.params),hash:ae(n.hash),redirectedFrom:void 0,href:o})}let n;if(null!=e.path)n=M({},e,{path:se(s,e.path,t.path).path});else{const a=M({},e.params);for(const e in a)null==a[e]&&delete a[e];n=M({},e,{params:f(a)}),t.params=f(t.params)}const a=l.resolve(n,t),r=e.hash||"";a.params=m(h(a.params));const c=function(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}(o,M({},e,{hash:(u=r,Y(u).replace(K,"{").replace(Z,"}").replace(J,"^")),path:a.path}));var u;const d=i.createHref(c);return M({fullPath:c,hash:r,query:o===Pe?Ie(e.query):e.query||{}},a,{redirectedFrom:void 0,href:d})}function y(e){return"string"==typeof e?se(s,e,p.value.path):M({},e)}function b(e,t){if(v!==e)return Se(we.NAVIGATION_CANCELLED,{from:t,to:e})}function k(e){return w(e)}function C(e,t){const n=e.matched[e.matched.length-1];if(n&&n.redirect){const{redirect:a}=n;let l="function"==typeof a?a(e,t):a;return"string"==typeof l&&(l=l.includes("?")||l.includes("#")?l=y(l):{path:l},l.params={}),M({query:e.query,hash:e.hash,params:null!=l.path?{}:e.params},l)}}function w(e,t){const n=v=g(e),a=p.value,l=e.state,s=e.force,i=!0===e.replace,r=C(n,a);if(r)return w(M(y(r),{state:"object"==typeof r?M({},l,r.state):l,force:s,replace:i}),t||n);const c=n;let u;return c.redirectedFrom=t,!s&&function(e,t,n){const a=t.matched.length-1,l=n.matched.length-1;return a>-1&&a===l&&ie(t.matched[a],n.matched[l])&&re(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}(o,a,n)&&(u=Se(we.NAVIGATION_DUPLICATED,{to:c,from:a}),U(a,a,!0,!1)),(u?Promise.resolve(u):E(c,a)).catch(e=>Ee(e)?Ee(e,we.NAVIGATION_GUARD_REDIRECT)?e:B(e):D(e,c,a)).then(e=>{if(e){if(Ee(e,we.NAVIGATION_GUARD_REDIRECT))return w(M({replace:i},y(e.to),{state:"object"==typeof e.to?M({},l,e.to.state):l,force:s}),t||c)}else e=P(c,a,!0,i,l);return A(c,a,e),e})}function x(e,t){const n=b(e,t);return n?Promise.reject(n):Promise.resolve()}function S(e){const t=F.values().next().value;return t&&"function"==typeof t.runWithContext?t.runWithContext(e):e()}function E(e,t){let n;const[a,l,s]=function(e,t){const n=[],a=[],l=[],s=Math.max(t.matched.length,e.matched.length);for(let o=0;o<s;o++){const s=t.matched[o];s&&(e.matched.find(e=>ie(e,s))?a.push(s):n.push(s));const i=e.matched[o];i&&(t.matched.find(e=>ie(e,i))||l.push(i))}return[n,a,l]}(e,t);n=qe(a.reverse(),"beforeRouteLeave",e,t);for(const i of a)i.leaveGuards.forEach(a=>{n.push(Le(a,e,t))});const o=x.bind(null,e,t);return n.push(o),H(n).then(()=>{n=[];for(const a of r.list())n.push(Le(a,e,t));return n.push(o),H(n)}).then(()=>{n=qe(l,"beforeRouteUpdate",e,t);for(const a of l)a.updateGuards.forEach(a=>{n.push(Le(a,e,t))});return n.push(o),H(n)}).then(()=>{n=[];for(const a of s)if(a.beforeEnter)if(V(a.beforeEnter))for(const l of a.beforeEnter)n.push(Le(l,e,t));else n.push(Le(a.beforeEnter,e,t));return n.push(o),H(n)}).then(()=>(e.matched.forEach(e=>e.enterCallbacks={}),n=qe(s,"beforeRouteEnter",e,t,S),n.push(o),H(n))).then(()=>{n=[];for(const a of u.list())n.push(Le(a,e,t));return n.push(o),H(n)}).catch(e=>Ee(e,we.NAVIGATION_CANCELLED)?e:Promise.reject(e))}function A(e,t,n){d.list().forEach(a=>S(()=>a(e,t,n)))}function P(e,t,n,a,l){const s=b(e,t);if(s)return s;const o=t===de,r=T?history.state:{};n&&(a||o?i.replace(e.fullPath,M({scroll:o&&r&&r.scroll},l)):i.push(e.fullPath,l)),p.value=e,U(e,t,n,o),B()}let I;function R(){I||(I=i.listen((e,t,n)=>{if(!$.listening)return;const a=g(e),l=C(a,$.currentRoute.value);if(l)return void w(M(l,{replace:!0,force:!0}),a).catch(q);v=a;const s=p.value;var o,r;T&&(o=be(s.fullPath,n.delta),r=ge(),ke.set(o,r)),E(a,s).catch(e=>Ee(e,we.NAVIGATION_ABORTED|we.NAVIGATION_CANCELLED)?e:Ee(e,we.NAVIGATION_GUARD_REDIRECT)?(w(M(y(e.to),{force:!0}),a).then(e=>{Ee(e,we.NAVIGATION_ABORTED|we.NAVIGATION_DUPLICATED)&&!n.delta&&n.type===pe.pop&&i.go(-1,!1)}).catch(q),Promise.reject()):(n.delta&&i.go(-n.delta,!1),D(e,a,s))).then(e=>{(e=e||P(a,s,!1))&&(n.delta&&!Ee(e,we.NAVIGATION_CANCELLED)?i.go(-n.delta,!1):n.type===pe.pop&&Ee(e,we.NAVIGATION_ABORTED|we.NAVIGATION_DUPLICATED)&&i.go(-1,!1)),A(a,s,e)}).catch(q)}))}let O,N=Me(),_=Me();function D(e,t,n){B(e);const a=_.list();return a.length?a.forEach(a=>a(e,t,n)):console.error(e),Promise.reject(e)}function B(e){return O||(O=!e,R(),N.list().forEach(([t,n])=>e?n(e):t()),N.reset()),e}function U(e,n,a,l){const{scrollBehavior:s}=t;if(!T||!s)return Promise.resolve();const o=!a&&function(e){const t=ke.get(e);return ke.delete(e),t}(be(e.fullPath,0))||(l||!a)&&history.state&&history.state.scroll||null;return c().then(()=>s(e,n,o)).then(e=>e&&ye(e)).catch(t=>D(t,e,n))}const G=e=>i.go(e);let j;const F=new Set,$={currentRoute:p,listening:!0,addRoute:function(e,t){let n,a;return Ce(e)?(n=l.getRecordMatcher(e),a=t):a=e,l.addRoute(a,n)},removeRoute:function(e){const t=l.getRecordMatcher(e);t&&l.removeRoute(t)},clearRoutes:l.clearRoutes,hasRoute:function(e){return!!l.getRecordMatcher(e)},getRoutes:function(){return l.getRoutes().map(e=>e.record)},resolve:g,options:t,push:k,replace:function(e){return k(M(y(e),{replace:!0}))},go:G,back:()=>G(-1),forward:()=>G(1),beforeEach:r.add,beforeResolve:u.add,afterEach:d.add,onError:_.add,isReady:function(){return O&&p.value!==de?Promise.resolve():new Promise((e,t)=>{N.add([e,t])})},install(e){e.component("RouterLink",it),e.component("RouterView",dt),e.config.globalProperties.$router=$,Object.defineProperty(e.config.globalProperties,"$route",{enumerable:!0,get:()=>n(p)}),T&&!j&&p.value===de&&(j=!0,k(i.location).catch(e=>{}));const t={};for(const n in de)Object.defineProperty(t,n,{get:()=>p.value[n],enumerable:!0});e.provide(Ne,$),e.provide(Te,a(t)),e.provide(_e,p);const l=e.unmount;F.add(e),e.unmount=function(){F.delete(e),F.size<1&&(v=de,I&&I(),I=null,p.value=de,j=!1,O=!1),l()}}};function H(e){return e.reduce((e,t)=>e.then(()=>S(t)),Promise.resolve())}return $}({history:function(e){const t=Be(e=me(e)),n=function(e,t,n,a){let l=[],s=[],o=null;const i=({state:s})=>{const i=Ve(e,location),r=n.value,c=t.value;let u=0;if(s){if(n.value=i,t.value=s,o&&o===r)return void(o=null);u=c?s.position-c.position:0}else a(i);l.forEach(e=>{e(n.value,r,{delta:u,type:pe.pop,direction:u?u>0?ve.forward:ve.back:ve.unknown})})};function r(){if("hidden"===document.visibilityState){const{history:e}=window;if(!e.state)return;e.replaceState(M({},e.state,{scroll:ge()}),"")}}return window.addEventListener("popstate",i),window.addEventListener("pagehide",r),document.addEventListener("visibilitychange",r),{pauseListeners:function(){o=n.value},listen:function(e){l.push(e);const t=()=>{const t=l.indexOf(e);t>-1&&l.splice(t,1)};return s.push(t),t},destroy:function(){for(const e of s)e();s=[],window.removeEventListener("popstate",i),window.removeEventListener("pagehide",r),document.removeEventListener("visibilitychange",r)}}}(e,t.state,t.location,t.replace),a=M({location:"",base:e,go:function(e,t=!0){t||n.pauseListeners(),history.go(e)},createHref:he.bind(null,e)},t,n);return Object.defineProperty(a,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(a,"state",{enumerable:!0,get:()=>t.state.value}),a}(),routes:As});Ps.beforeEach((e,t,n)=>{const{currentUser:a,initAuth:l}=Nt();l();const s=null!==a.value,o=e.meta.requiresAuth;if(!o||s)if("Login"===e.name&&s)n({name:"Dashboard"});else{if(o&&e.meta.requiresRole&&s){if(!(Array.isArray(e.meta.requiresRole)?e.meta.requiresRole:[e.meta.requiresRole]).includes(a.value.role))return void n({name:"Dashboard"})}n()}else n({name:"Login"})});const Is=N(Wt);Is.use(Ps),Is.mount("#app");
